"use strict";(self.webpackChunkkahpm=self.webpackChunkkahpm||[]).push([[179],{824:()=>{var e=/^th\b/.test(navigator.language)?"th":"en",t="https://air4thai.pcd.go.th/forappV2/getAQI_JSON.php";"http:"===document.location.protocol&&(t="http://air4thai.pcd.go.th/forappV2/getAQI_JSON.php");var n=t,r={mode:"cors",method:"get",cache:"no-cache",headers:new Headers},a=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},i=!1,c=!new URL(String(document.location)).searchParams.has("nogeoha");console.log("ha "+c),"geolocation"in navigator&&(i=!0);var l=function(e){return a(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,e.sort((function(e,t){return"distance"in e&&"distance"in t?Number(e.distance)-Number(t.distance):1}))]}))}))},u=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},d=function(e){var t=document.createElement("div"),n=document.createElement("h1"),r=document.createElement("p");return t.classList.add("klgcard"),n.textContent=String(e.num),r.textContent=String(e.data),t.appendChild(n),t.appendChild(r),t},h=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};console.log("hello world!"),window.addEventListener("DOMContentLoaded",(function(){h(void 0,void 0,void 0,(function(){var t,n,r,a;return p(this,(function(o){switch(o.label){case 0:return[4,h(void 0,void 0,void 0,(function(){var t,n,r,a,o,i,c,l;return p(this,(function(u){return(t=document.createElement("div")).classList.add("contx","info","klg"),(n=document.createElement("h1")).classList.add("title"),n.textContent="th"===e?"การป้องกันตนเองจากฝุ่น PM 2.5":"Self-protection from PM 2.5 dust",t.appendChild(n),(r=document.createElement("div")).classList.add("klgcardwrapp"),(a=document.createElement("div")).classList.add("klgcardcon"),a.id="klg_spd",r.appendChild(a),t.appendChild(r),o=document.createElement("hr"),t.appendChild(o),(i=document.createElement("h1")).classList.add("title"),i.textContent="th"===e?"วิธีลดฝุ่น PM 2.5":"Ways to reduce PM 2.5",t.appendChild(i),(c=document.createElement("div")).classList.add("klgcardwrapp"),(l=document.createElement("div")).classList.add("klgcardcon"),l.id="klg_rds",c.appendChild(l),t.appendChild(c),[2,t]}))}))];case 1:return t=o.sent(),[4,h(void 0,void 0,void 0,(function(){var t,n,r,a,o,i,c;return p(this,(function(l){return(t=document.createElement("div")).classList.add("contx","info","datalisty"),(n=document.createElement("h1")).setAttribute("hide1",""),n.setAttribute("titlee",""),n.textContent="th"===e?"ค่าฝุ่น PM 2.5":"PM 2.5 Levels",t.appendChild(n),(r=document.createElement("hr")).setAttribute("hide1",""),t.appendChild(r),(a=document.createElement("div")).classList.add("intercontentwrapper"),(o=document.createElement("div")).classList.add("intercontent"),a.appendChild(o),t.appendChild(a),(i=document.createElement("hr")).setAttribute("hide1",""),t.appendChild(i),(c=document.createElement("p")).setAttribute("hide1",""),c.textContent="".concat(String.fromCharCode(169)," 2022 KNP | MIT License"),t.appendChild(c),[2,t]}))}))];case 2:return n=o.sent(),null===(r=document.querySelector("#app"))||void 0===r||r.appendChild(t),null===(a=document.querySelector("#app"))||void 0===a||a.appendChild(n),[2]}}))})).then((function(){return function(){var t=document.querySelector("#klg_spd");if(t){for(;t.hasChildNodes();){if(!t.lastChild)return;t.removeChild(t.lastChild)}var n=["Close the window to prevent small dust particles.","Avoid leaving the house unnecessarily.","Wear a mask that can protect against PM 2.5","Refrain from exercising or working hard outdoors.","Risk groups should avoid inhaling fine dust."];"th"===e&&(n=["ปิดประตูหน้าต่าง เพื่อป้องกันฝุ่นละอองขนาดเล็ก","หลีกเลี่ยงการออกจากบ้านโดยไม่จำเป็น","สวมหน้ากากอนามัยที่สามารถป้องกัน PM 2.5 ได้","งดออกกำลังกายหรือทำงานหนักกลางแจ้ง","กลุ่มเสี่ยงควรหลีกเลี่ยงการสูดฝุ่นละอองขนาดเล็ก"]);for(var r=0;r<n.length;r++){var a=n[r],o=d({num:r+1,data:a});t.appendChild(o)}}}()})).then((function(){return function(){var t=document.querySelector("#klg_rds");if(t){for(;t.hasChildNodes();){if(!t.lastChild)return;t.removeChild(t.lastChild)}var n=["Avoid burning garbage, incense, and switch to electric incense.","Use an air purifier.","Plant trees.","Reduce the use of personal cars.","Always check the condition of the car. to reduce black smoke.","Keep the house clean."];"th"===e&&(n=["งดเผาขยะ งดจุดธูป เปลี่ยนมาใช้ธูปไฟฟ้า","ติดตั้งเครื่องฟอกอากาศ","ปลูกต้นไม้ฟอกอากาศ","ลดการใช้รถยนต์ส่วนบุคคล","หมั่นเช็คสภาพรถ เพื่อลดควันดำ","หมั่นทำความสะอาดบ้าน"]);for(var r=0;r<n.length;r++){var a=n[r],o=d({num:r+1,data:a});t.appendChild(o)}}}()})).then((function(){return u(void 0,void 0,void 0,(function(){var t,d,h;return s(this,(function(p){switch(p.label){case 0:return[4,u(void 0,void 0,void 0,(function(){var e,t,a,o;return s(this,(function(i){switch(i.label){case 0:e=!0,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(n,r)];case 2:return(t=i.sent()).ok||(e=!1),[4,t.json()];case 3:return a=i.sent(),[2,{status:e,data:a}];case 4:return o=i.sent(),e=!1,alert("Error: "+o),[2,{status:e,data:void 0}];case 5:return[2]}}))}))];case 1:return!1!==(t=p.sent()).status&&t.data?[4,(v=t.data.stations,a(void 0,void 0,void 0,(function(){var e,t,n,r,l,u,s,d,h,p,f,m,b,g,w;return o(this,(function(y){switch(y.label){case 0:return[4,a(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e,t){i||t({s:!1,d:"Geo not supported"}),navigator.geolocation.getCurrentPosition((function(t){return e({s:!0,c:t})}),(function(t){e({s:!1,d:t.message})}),{enableHighAccuracy:c})}))]}))}))];case 1:if(!1===(e=y.sent()).s){for(t=[],r=0;r<v.length;r++)(l=v[r]).distance="1",t.push(l);return[2,t]}for(n=[],r=0;r<v.length;r++){if(!e.c)throw new Error("c is undefined.");l=v[r],u=Number(l.lat),s=Number(l.long),d=Math.PI*(e.c.coords.latitude/180),h=Math.PI*(u/180),p=e.c.coords.longitude-s,f=Math.PI*(p/180),m=Math.sin(d)*Math.sin(h)+Math.cos(d)*Math.cos(h)*Math.cos(f),b=Math.acos(m),g=b*(180/Math.PI),w=69.09*g*1.609344,isNaN(w)&&console.warn("DISTANCY is NAN"),l.distance=String(w),n.push(l)}return[2,n]}}))})))]:[2];case 2:return d=p.sent(),[4,l(d)];case 3:return h=p.sent(),[4,(f=h,u(void 0,void 0,void 0,(function(){var t,n,r,a,o;return s(this,(function(i){switch(i.label){case 0:if(!(t=document.querySelector(".intercontent")))return[2];for(;t.hasChildNodes();){if(!t.lastChild)return[2];t.removeChild(t.lastChild)}n=0,i.label=1;case 1:return n<f.length?(r=f[n],a="th"===e?r.areaTH:r.areaEN,[4,(c={area:a,aqi:r.AQILast.PM25.aqi,color_c:r.AQILast.PM25.color_id},u(void 0,void 0,void 0,(function(){var e,t,n,r,a;return s(this,(function(o){return(e=document.createElement("div")).classList.add("card"),e.setAttribute("color",c.color_c),(t=document.createElement("p")).textContent=c.area,e.appendChild(t),(n=document.createElement("div")).classList.add("txtwrp"),(r=document.createElement("h1")).setAttribute("tnum",""),r.textContent=c.aqi,n.appendChild(r),(a=document.createElement("h1")).textContent="AQI",n.appendChild(a),e.appendChild(n),[2,e]}))})))]):[3,4];case 2:o=i.sent(),t.appendChild(o),i.label=3;case 3:return n++,[3,1];case 4:return[2]}var c}))})))];case 4:return p.sent(),[2]}var f,v}))}))}))}))}},e=>{e(e.s=824)}]);