"use strict";(self.webpackChunkkahpm=self.webpackChunkkahpm||[]).push([[179],{824:()=>{var e=/^th\b/.test(navigator.language)?"th":"en",t="https://air4thai.pcd.go.th/forappV2/getAQI_JSON.php";"http:"===document.location.protocol&&(t="http://air4thai.pcd.go.th/forappV2/getAQI_JSON.php");var n=t,r={mode:"cors",method:"get",cache:"no-cache",headers:new Headers},a=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},i=function(e){return a(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,e.sort((function(e,t){return"distance"in e&&"distance"in t?Number(e.distance)-Number(t.distance):1}))]}))}))},c=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},u=function(e){var t=document.createElement("div"),n=document.createElement("h1"),r=document.createElement("p");return t.classList.add("klgcard"),n.textContent=String(e.num),r.textContent=String(e.data),t.appendChild(n),t.appendChild(r),t},d=function(){return t=void 0,n=void 0,a=function(){return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(t){return function(){var t=document.querySelector("#klg_spd");if(t){for(;t.hasChildNodes();){if(!t.lastChild)return;t.removeChild(t.lastChild)}var n=["Close the window to prevent small dust particles.","Avoid leaving the house unnecessarily.","Wear a mask that can protect against PM 2.5","Refrain from exercising or working hard outdoors.","Risk groups should avoid inhaling fine dust."];"th"===e&&(n=["ปิดประตูหน้าต่าง เพื่อป้องกันฝุ่นละอองขนาดเล็ก","หลีกเลี่ยงการออกจากบ้านโดยไม่จำเป็น","สวมหน้ากากอนามัยที่สามารถป้องกัน PM 2.5 ได้","งดออกกำลังกายหรือทำงานหนักกลางแจ้ง","กลุ่มเสี่ยงควรหลีกเลี่ยงการสูดฝุ่นละอองขนาดเล็ก"]);for(var r=0;r<n.length;r++){var a=n[r],o=u({num:r+1,data:a});t.appendChild(o)}}}(),function(){var t=document.querySelector("#klg_rds");if(t){for(;t.hasChildNodes();){if(!t.lastChild)return;t.removeChild(t.lastChild)}var n=["Avoid burning garbage, incense, and switch to electric incense.","Use an air purifier.","Plant trees.","Reduce the use of personal cars.","Always check the condition of the car. to reduce black smoke.","Keep the house clean."];"th"===e&&(n=["งดเผาขยะ งดจุดธูป เปลี่ยนมาใช้ธูปไฟฟ้า","ติดตั้งเครื่องฟอกอากาศ","ปลูกต้นไม้ฟอกอากาศ","ลดการใช้รถยนต์ส่วนบุคคล","หมั่นเช็คสภาพรถ เพื่อลดควันดำ","หมั่นทำความสะอาดบ้าน"]);for(var r=0;r<n.length;r++){var a=n[r],o=u({num:r+1,data:a});t.appendChild(o)}}}(),function(){var t=document.querySelector("#dat_abu");if(t){for(;t.hasChildNodes();){if(!t.lastChild)return;t.removeChild(t.lastChild)}var n=["This site is developed as a school projekt.","This site relies on IP-API and Air4Thai API.","This site uses GeoLocation to find the nearest station. (may not be accurate.)"];"th"===e&&(n=["เว็บไซต์นี้จัดทำขึ้นเพื่อเป็นโครงการของโรงเรียน","เว็บไซต์นี้ใช้ IP-API และ Air4Thai API","ไซต์นี้ใช้ GeoLocation เพื่อค้นหาสถานีที่ใกล้ที่สุด (อาจไม่ถูกต้อง)"]);for(var r=0;r<n.length;r++){var a=n[r],o=u({num:r+1,data:a});t.appendChild(o)}}}(),[2]}))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,c)}l((a=a.apply(t,n||[])).next())}));var t,n,r,a},s=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};console.log("hello world!"),window.addEventListener("DOMContentLoaded",(function(){s(void 0,void 0,void 0,(function(){var t,n,r,a,o;return h(this,(function(i){switch(i.label){case 0:return[4,s(void 0,void 0,void 0,(function(){var t,n,r,a,o,i,c,l;return h(this,(function(u){return(t=document.createElement("div")).classList.add("contx","info","klg"),(n=document.createElement("h1")).classList.add("title"),n.textContent="th"===e?"การป้องกันตนเองจากฝุ่น PM 2.5":"Self-protection from PM 2.5 dust",t.appendChild(n),(r=document.createElement("div")).classList.add("klgcardwrapp"),(a=document.createElement("div")).classList.add("klgcardcon"),a.id="klg_spd",r.appendChild(a),t.appendChild(r),o=document.createElement("hr"),t.appendChild(o),(i=document.createElement("h1")).classList.add("title"),i.textContent="th"===e?"วิธีลดฝุ่น PM 2.5":"Ways to reduce PM 2.5",t.appendChild(i),(c=document.createElement("div")).classList.add("klgcardwrapp"),(l=document.createElement("div")).classList.add("klgcardcon"),l.id="klg_rds",c.appendChild(l),t.appendChild(c),[2,t]}))}))];case 1:return t=i.sent(),[4,s(void 0,void 0,void 0,(function(){var t,n,r,a,o,i,c;return h(this,(function(l){return(t=document.createElement("div")).classList.add("contx","info","datalisty"),(n=document.createElement("h1")).setAttribute("hide1",""),n.setAttribute("titlee",""),n.textContent="th"===e?"ค่าฝุ่น PM 2.5":"PM 2.5 Levels",t.appendChild(n),(r=document.createElement("hr")).setAttribute("hide1",""),t.appendChild(r),(a=document.createElement("div")).classList.add("intercontentwrapper"),(o=document.createElement("div")).classList.add("intercontent"),a.appendChild(o),t.appendChild(a),(i=document.createElement("hr")).setAttribute("hide1",""),t.appendChild(i),(c=document.createElement("p")).setAttribute("hide1",""),c.textContent="".concat(String.fromCharCode(169)," 2022 KNP | MIT License"),t.appendChild(c),[2,t]}))}))];case 2:return n=i.sent(),[4,s(void 0,void 0,void 0,(function(){var t,n,r,a,o;return h(this,(function(i){return t=document.createElement("hr"),(n=document.createElement("div")).style.width="100%",n.style.padding="5px",n.appendChild(t),(r=document.createElement("h1")).classList.add("title"),r.textContent="th"===e?"เกี่ยวกับ":"About",n.appendChild(r),(a=document.createElement("div")).classList.add("klgcardwrapp"),(o=document.createElement("div")).classList.add("klgcardcon"),o.id="dat_abu",a.appendChild(o),n.appendChild(a),[2,n]}))}))];case 3:return r=i.sent(),t.appendChild(r),null===(a=document.querySelector("#app"))||void 0===a||a.appendChild(t),null===(o=document.querySelector("#app"))||void 0===o||o.appendChild(n),[2]}}))})).then((function(){return d()})).then((function(){return c(void 0,void 0,void 0,(function(){var t,u,d;return l(this,(function(s){switch(s.label){case 0:return[4,c(void 0,void 0,void 0,(function(){var e,t,a,o;return l(this,(function(i){switch(i.label){case 0:e=!0,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(n,r)];case 2:return(t=i.sent()).ok||(e=!1),[4,t.json()];case 3:return a=i.sent(),[2,{status:e,data:a}];case 4:return o=i.sent(),e=!1,alert("Error: "+o),[2,{status:e,data:void 0}];case 5:return[2]}}))}))];case 1:return!1!==(t=s.sent()).status&&t.data?[4,(p=t.data.stations,a(void 0,void 0,void 0,(function(){var e,t,n,i,c,l,u,d,s,h,f,v,m,b,y;return o(this,(function(w){switch(w.label){case 0:return[4,a(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e,t){fetch("http://ip-api.com/json/",r).then((function(e){return e.json()})).then((function(t){return e({s:!0,d:t})})).catch((function(){return t({s:!1})}))}))]}))}))];case 1:if(!1===(e=w.sent()).s){for(t=[],i=0;i<p.length;i++)(c=p[i]).distance="1",t.push(c);return[2,t]}for(n=[],i=0;i<p.length;i++){if(!e.d)throw new Error("d is undefined.");c=p[i],l=Number(c.lat),u=Number(c.long),d=Math.PI*(e.d.lat/180),s=Math.PI*(l/180),h=e.d.lon-u,f=Math.PI*(h/180),v=Math.sin(d)*Math.sin(s)+Math.cos(d)*Math.cos(s)*Math.cos(f),m=Math.acos(v),b=m*(180/Math.PI),y=69.09*b*1.609344,isNaN(y)&&console.warn("DISTANCY is NAN"),c.distance=String(y),n.push(c)}return console.log(n),[2,n]}}))})))]:[2];case 2:return u=s.sent(),[4,i(u)];case 3:return d=s.sent(),[4,(h=d,c(void 0,void 0,void 0,(function(){var t,n,r,a,o;return l(this,(function(i){switch(i.label){case 0:if(!(t=document.querySelector(".intercontent")))return[2];for(;t.hasChildNodes();){if(!t.lastChild)return[2];t.removeChild(t.lastChild)}n=0,i.label=1;case 1:return n<h.length?(r=h[n],a="th"===e?r.areaTH:r.areaEN,[4,(u={area:a,aqi:r.AQILast.PM25.aqi,color_c:r.AQILast.PM25.color_id},c(void 0,void 0,void 0,(function(){var e,t,n,r,a;return l(this,(function(o){return(e=document.createElement("div")).classList.add("card"),e.setAttribute("color",u.color_c),(t=document.createElement("p")).textContent=u.area,e.appendChild(t),(n=document.createElement("div")).classList.add("txtwrp"),(r=document.createElement("h1")).setAttribute("tnum",""),r.textContent=u.aqi,n.appendChild(r),(a=document.createElement("h1")).textContent="AQI",n.appendChild(a),e.appendChild(n),[2,e]}))})))]):[3,4];case 2:o=i.sent(),t.appendChild(o),i.label=3;case 3:return n++,[3,1];case 4:return[2]}var u}))})))];case 4:return s.sent(),[2]}var h,p}))}))}))}))}},e=>{e(e.s=824)}]);